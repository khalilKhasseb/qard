# Cron Jobs for Shared Hosting - User: weno
# Add these to your crontab: crontab -e
# Update the path to match your actual application location

# Laravel Scheduler (required) - runs every minute
* * * * * cd /home/weno/www && php artisan schedule:run >/dev/null 2>&1

# Queue Worker Monitor - checks every 2 minutes and restarts if needed
*/2 * * * * cd /home/weno/www && ./queue-worker-shared.sh monitor >/dev/null 2>&1

# Queue Worker Restart - restart every hour to prevent memory issues
0 * * * * cd /home/weno/www && ./queue-worker-shared.sh restart >/dev/null 2>&1

# Clean up old logs - runs daily at 2 AM
0 2 * * * find /home/weno/www/storage/logs -name "*.log" -mtime +7 -delete 2>/dev/null

# Optional: Failed job retry - retry failed jobs every 6 hours
0 */6 * * * cd /home/weno/www && php artisan queue:retry all >/dev/null 2>&1

# Manual queue processing backup - runs every 5 minutes if worker fails
*/5 * * * * cd /home/weno/www && php artisan queue:process-batch --jobs=3 >/dev/null 2>&1